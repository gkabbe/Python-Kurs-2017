<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="de">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>4 - Module &amp; Exceptions | Python Kurs 2017</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/ipython.min.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/nikola_ipython.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../../rss.xml">
<link rel="canonical" href="https://gkabbe.github.io/Python-Kurs-2017/vorlesungen/module_exceptions/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Gabriel Kabbe">
<link rel="prev" href="../funktionen_klassen_objekte/" title="3  Funktionen, Klassen und Objekte" type="text/html">
<link rel="next" href="../numpy/" title="5 - Numpy" type="text/html">
<meta property="og:site_name" content="Python Kurs 2017">
<meta property="og:title" content="4 - Module &amp; Exceptions">
<meta property="og:url" content="https://gkabbe.github.io/Python-Kurs-2017/vorlesungen/module_exceptions/">
<meta property="og:description" content="Module
Nachdem wir in der letzten Woche gelernt haben, wie man den selbstgeschriebenen Code besser organisieren kann durch Einsatz von Funktionen und Klassen, wird heute gezeigt, wie man nun Dateien m">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2017-04-28T00:00:00+01:00">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Springe zum Hauptinhalt</a>

<!-- Menubar -->

<nav class="navbar navbar-toggleable-md navbar-inverse bg-inverse static-top mb-4"><div class="container">
<!-- This keeps the margins nice -->
        <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <a class="navbar-brand" href="https://gkabbe.github.io/Python-Kurs-2017/">

            <span id="blog-title">Python Kurs 2017</span>
        </a>

        <div class="collapse navbar-collapse" id="bs-navbar">
            <ul class="navbar-nav mr-auto">
<li class="nav-item">
<a href="../../vorlesungen" class="nav-link">Vorlesungen</a>
                </li>
<li class="nav-item">
<a href="../../%C3%BCbungen" class="nav-link">Übungen</a>
                </li>
<li class="nav-item">
<a href="../../categories/" class="nav-link">Tags</a>
                </li>
<li class="nav-item">
<a href="../../rss.xml" class="nav-link">RSS-Feed</a>
                </li>
<li class="nav-item">
<a href="../../about" class="nav-link">Impressum</a>

                
            </li>
</ul>
<ul class="navbar-nav navbar-right">
<li class="nav-item">
    <a href="index.md" id="sourcelink" class="nav-link">Source</a>
    </li>

                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        
        
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">4 - Module &amp; Exceptions</a></h1>

        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">
                    Gabriel Kabbe
            </span></p>
            <p class="dateline"><a href="." rel="bookmark"><time class="published dt-published" datetime="2017-04-28T00:00:00+01:00" itemprop="datePublished" title="2017-04-28 00:00">2017-04-28 00:00</time></a></p>
            
        <p class="sourceline"><a href="index.md" id="sourcelink">Source</a></p>

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div>
<h2>Module</h2>
<p>Nachdem wir in der letzten Woche gelernt haben, wie man den selbstgeschriebenen Code besser organisieren kann durch Einsatz von Funktionen und Klassen, wird heute gezeigt, wie man nun Dateien mit Code als sogenannte Module speichern kann.</p>
<h3>Importieren aus anderer Python-Datei</h3>
<p>Um aus einer weiteren Pythondatei Klassen, Funktionen, oder Variablen zu laden benutzt man </p>
<pre class="code literal-block"><span></span><span class="kn">import</span> <span class="o">&lt;</span><span class="n">Dateiname</span> <span class="n">ohne</span> <span class="o">.</span><span class="n">py</span><span class="o">&gt;.&lt;</span><span class="n">Klassen</span><span class="o">/</span><span class="n">Funktions</span><span class="o">/</span><span class="n">Variablenname</span><span class="o">&gt;</span>
</pre>


<p>Wichtig: damit das funktioniert, muss der Python-Interpreter im selben Ordner gestartet worden sein wie die Datei aus der importiert wurde!</p>
<h3>Importieren aus Ordnerstruktur</h3>
<p>Um aus einer komplexeren Ordnerstruktur importieren zu können, geht man wie folgt vor:</p>
<pre class="code literal-block"><span></span><span class="kn">import</span> <span class="o">&lt;</span><span class="n">Ordner</span><span class="o">&gt;.&lt;</span><span class="n">Unterordner</span><span class="o">&gt;.&lt;</span><span class="n">Unterunterordner</span><span class="o">&gt;.&lt;...&gt;.&lt;</span><span class="n">Dateiname</span><span class="o">&gt;.&lt;</span><span class="n">Klassen</span><span class="o">/</span><span class="n">Funktions</span><span class="o">/</span><span class="n">Variablennamen</span><span class="o">&gt;</span>
</pre>


<h3>from ... import ...</h3>
<p>Möchten wir etwas direkt in den aktuellen Namespace importieren, benutzen wir <em>from ... import</em> </p>
<h3>import ... as ...</h3>
<p>Mittels <em>import ... as ...</em> können wir dem importierten Modul einen anderen (oft gekürzten) Namen geben.</p>
<h3>Beispiel</h3>
<p>Die aus einer Übung bekannten Funktionen <em>write_file</em> und <em>read_file</em> haben wir in einer Datei <em>input_output_file.py</em> gespeichert, und sind so von ihnen überzeugt, dass wir sie in Zukunft öfters benutzen möchten.</p>
<p>Sind wir im selben Ordner wie die Datei, ist es ganz einfach, von einer anderen Python-Datei aus auf den schon vorhandenen Code zuzugreifen: wir schreiben einfach</p>
<pre class="code literal-block"><span></span><span class="kn">import</span> <span class="nn">input_output_file</span> <span class="c1"># Achtung, die Endung .py nicht schreiben!</span>
</pre>


<p>und können dann folgendermaßen auf die Funktionen (sowie Klassen und Variablen), die in der Datei <em>input_output_file.py</em> geschrieben wurden, zugreifen:</p>
<pre class="code literal-block"><span></span><span class="n">data</span> <span class="o">=</span> <span class="n">input_output_file</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="s2">"dateiname"</span><span class="p">)</span>
</pre>


<p>Wem es zu lästig ist, bei jedem Funktionsaufruf den Modulnamen zu schreiben, kann am Anfang folgendes tun:</p>
<pre class="code literal-block"><span></span><span class="kn">from</span> <span class="nn">input_output_file</span> <span class="kn">import</span> <span class="n">read_file</span><span class="p">,</span> <span class="n">write_file</span> <span class="c1"># , ...</span>

<span class="n">data</span> <span class="o">=</span> <span class="n">read_file</span><span class="p">(</span><span class="s2">"dateiname"</span><span class="p">)</span>
</pre>


<p>Auf diese Weise werden aber auch nur die Funktionen importiert, die wir explizit nach import auflisten. Wir können sie dann aber benutzen, ohne <em>input_output_file.</em> voranzustellen.</p>
<p>Es geht aber noch eine Stufe höher:
Angenommen, wir haben nicht nur eine Datei für Input und Output, sondern noch eine weitere (z.B. für das Einlesen von komprimierten Daten wie Zip-Files zuständig sein). In diesem Fall bietet es sich an einen eigenen Ordner <em>input_output</em> anzulegen, und in diesen die beiden Python-Dateien zu legen.</p>
<p>Ganz ähnlich wie zuvor wollen wir nun die Funktionen read_file und write_file importieren.
Um das tun zu können, müssen wir es Python jedoch möglich machen, den Ordner <em>input_output</em> als Modul zu erkennen.
Das tun wir, indem wir eine leere Datei mit dem Namen <em>__init__.py</em> im Ordner <em>input_output</em> anlegen. 
Wir können unseren Code in beliebig tief geschachtelten Ordnerstrukturen vergraben, solange wir nur daran denken, in jedem Ordner eine <em>__init__.py</em> Datei anzulegen.</p>
<p>Danach können wir, wenn wir uns außerhalb des Ordners befinden, per</p>
<pre class="code literal-block"><span></span><span class="kn">from</span> <span class="nn">input_output.input_output_file</span> <span class="kn">import</span> <span class="n">read_file</span><span class="p">,</span> <span class="n">write_file</span>
</pre>


<p>die Funktionen <em>read_file</em> und <em>write_file</em> wieder importieren.</p>
<p>Alternativ:</p>
<pre class="code literal-block"><span></span><span class="kn">import</span> <span class="nn">input_output.input_output_file</span>
</pre>


<p>Oft ist es ratsam, die Funktionen/Klassen/Variablen nicht direkt in den globalen Namespace zu laden, da es dann zu Konflikten mit schon bestehenden Namen kommen kann.</p>
<p>Um in diesem Fall zu viel Schreibarbeit aufgrund langer Modulnamen zu vermeiden, lässt sich folgender Trick anwenden:</p>
<pre class="code literal-block"><span></span><span class="kn">import</span> <span class="nn">input_output.input_output_file</span> <span class="kn">as</span> <span class="nn">iof</span> <span class="c1"># 'as' keyword gefolgt von Aliasnamen</span>
</pre>


<p>Im weiteren Verlauf lässt sich dann per </p>
<pre class="code literal-block"><span></span>iof.read_file("bla")
</pre>


<p>auf die Funktionen zugreifen.</p>
<h3>Selbstgeschriebene Module für den Python-Interpreter sichtbar machen</h3>
<p>Haben wir nun ein selbsterstelltes Modul irgendwo auf unserer Festplatte liegen, müssen wir nun Python noch sagen, wo es sich befindet. Das machen wir, indem wir den Speicherort zum <em>Pythonpath</em> hinzufügen.</p>
<p>Die einfachste Variante ist vermutlich, den Pythonpfad direkt im Code zu setzen:</p>
<pre class="code literal-block"><span></span><span class="kn">import</span> <span class="nn">sys</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"/Pfad/zum/Ordner/in/dem/das/Modul/liegt"</span><span class="p">)</span>
<span class="kn">import</span> <span class="nn">mein_modul</span> <span class="c1"># ersetze mein_modul durch gewünschten Modulnamen</span>
</pre>


<p>Möchte man den Pfad dauerhaft hinzufügen, tun Linux-User folgendes im Terminal:</p>
<pre class="code literal-block"><span></span><span class="nb">cd</span> ~
<span class="nb">echo</span> <span class="s1">'export PYTHONPATH="/Pfad/zu/meinem/Modul:$PYTHONPATH"'</span> &gt;&gt; .bashrc
</pre>


<p>Windows-User können folgendes ausprobieren:</p>
<p>In die Datei autoexec.bat wird folgende Zeile geschrieben:</p>
<pre class="code literal-block"><span></span>set PYTHONPATH=%PYTHONPATH%;C:\Pfad/zu/meinem/Modul
</pre>


<h3>Die Python Standard Library</h3>
<p>Netterweise kommt Python schon mit einer Menge <a href="https://docs.python.org/2/library/index.html">eigener Module</a> daher. Die wichtigsten (persönliche Meinung des Dozenten) werden hier kurz vorgestellt:</p>
<h4>sys</h4>
<p>Das Modul <a href="https://docs.python.org/2/library/sys.html">sys</a> enthält vor allem Variablen, die vom Python-Interpreter benutzt werden oder mit ihm interagieren.</p>
<p>Hilfreich sind vor allem</p>
<ul>
<li>
<strong>sys.argv</strong>: Diese Variable speichert die Kommandozeilenargumente, mit denen ein Programm aufgerufen wurde. </li>
</ul>
<p>Folgendes Programm sei unter dem Namen main.py gespeichert:</p>
<p>```python
  import sys</p>
<p>print("ich wurde aufgerufen mit den Argumenten:", sys.argv)
  ````</p>
<p>Starten wir dieses Skript folgendermaßen:</p>
<p><code>bash
  python main.py hier ganz viele kommandozeilen argumente 1 2 3 4 5</code></p>
<p>so ist die Ausgabe:</p>
<p><code>ich wurde aufgerufen mit den Argumenten: ['test.py', 'hier', 'ganz', 'viele', 'kommandozeilen', 'argumente', '1', '2', '3', '4', '5']</code></p>
<p>Alle Argumente werden also als Strings in einer Liste gespeichert.</p>
<ul>
<li>
<strong>sys.path</strong>: In dieser Variablen werden alle Pfade gespeichert, in denen der Interpreter nach nutzbaren Python-Modulen sucht. Möchte man einen weiteren Pfad hinzufügen, tut man das einfach per</li>
</ul>
<p><code>python
  sys.path.append("/mein/neuer/pfad")</code> </p>
<p>Der neu hinzugefügte Pfad verschwindet allerdings wieder aus sys.path wenn das Skript endet!</p>
<ul>
<li>
<strong>sys.exit()</strong>: Diese Funktion beendet das Skript sofort. </li>
</ul>
<h4><a href="https://docs.python.org/2/library/pickle.html">pickle</a></h4>
<p>Erlaubt es, Python-Objekte zu serialisieren, d.h. sie als Datei zu speichern.</p>
<p>Beispiel:</p>
<pre class="code literal-block"><span></span><span class="kn">import</span> <span class="nn">pickle</span>

<span class="k">class</span> <span class="nc">MeineKlasse</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="mi">2</span>

<span class="n">mk</span> <span class="o">=</span> <span class="n">MeineKlasse</span><span class="p">()</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">"meine_klasse.pickle"</span><span class="p">,</span> <span class="s2">"w"</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">mk</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
</pre>


<p>Das gespeicherte Objekt kann anschließend folgendermaßen geladen werden:</p>
<pre class="code literal-block"><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">"meine_klasse.pickle"</span><span class="p">,</span> <span class="s2">"r"</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</pre>


<h4><a href="https://docs.python.org/2/library/collections.html">collections</a></h4>
<p>In diesem Modul sind diverse nützliche Container-Datentypen, die teilweise Erweiterungen der Standard-Container dict, list und tuple sind.</p>
<ul>
<li>
<strong>Counter</strong>: Damit lassen sich Elemente sehr einfach zählen. Beispiel mit dem Text aus der Übung <em>word_counter</em>:</li>
</ul>
<p>```python
  from collections import Counter</p>
<p>c = Counter(text.split()) 
  print(c.most_common(10)) # gibt die 10 häufigsten Wörter in text aus
  ```</p>
<ul>
<li>
<p><strong>deque</strong>: Eine Art Liste, bei der sich effizient an beiden Enden Elemente hinzufügen oder entfernen lassen.</p>
</li>
<li>
<p><strong>defaultdict</strong>: Ähnlich wie dict, aber legt für einen Key, der bisher nicht gespeichert war, automatisch einen entsprechenden Default-Value an.</p>
</li>
</ul>
<p>Beispiel:
  ```python
  from collections import defaultdict</p>
<p>int_dict = defaultdict(int)
  print(int_dict["blub"]) # gibt den Defaultwert 0 aus</p>
<p>list_dict = defaultdict(list):
  print(list_dict["irgendwas"]) # gibt eine leere Liste aus
  ```</p>
<ul>
<li>
<strong>OrderedDict</strong>: Ein Dictionary, das sich die Reihenfolge der eingefügten Elemente merkt</li>
</ul>
<h4><a href="https://docs.python.org/2/library/types.html">types</a></h4>
<p>Hilfreiches Modul, falls man doch mal gezwungen ist, Datentypen zu prüfen.</p>
<p>Beispiel:</p>
<pre class="code literal-block"><span></span><span class="kn">import</span> <span class="nn">types</span>

<span class="n">x</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">y</span> <span class="o">=</span> <span class="mf">1.23</span>
<span class="n">z</span> <span class="o">=</span> <span class="bp">True</span>

<span class="k">def</span> <span class="nf">f</span><span class="p">():</span>
    <span class="k">print</span> <span class="s2">"hello world"</span>

<span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="ow">is</span> <span class="n">types</span><span class="o">.</span><span class="n">IntType</span> <span class="c1"># True)</span>
<span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="ow">is</span> <span class="n">types</span><span class="o">.</span><span class="n">FloatType</span> <span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">z</span><span class="p">)</span> <span class="ow">is</span> <span class="n">types</span><span class="o">.</span><span class="n">BooleanType</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> <span class="ow">is</span> <span class="n">types</span><span class="o">.</span><span class="n">FunctionType</span><span class="p">)</span>
</pre>


<h4><a href="https://docs.python.org/2/library/math.html">math</a></h4>
<p>Dieses Modul enthält die wichtigsten mathematischen Operationen
Für Berechnungen komplexer Zahlen, benutze man <a href="https://docs.python.org/2/library/cmath.html">cmath</a></p>
<pre class="code literal-block"><span></span><span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">sin</span><span class="p">,</span> <span class="n">cos</span><span class="p">,</span> <span class="n">exp</span><span class="p">,</span> <span class="n">log</span><span class="p">,</span> <span class="n">pi</span>

<span class="n">sin</span><span class="p">(</span><span class="n">pi</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">cos</span><span class="p">(</span><span class="n">pi</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span> 
<span class="n">exp</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">log</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="c1"># usw.</span>
</pre>


<h4><a href="https://docs.python.org/2/library/random.html">random</a></h4>
<p>Modul zur Erzeugung von Zufallszahlen</p>
<p>Die wichtigsten Funktionen im Überblick:</p>
<pre class="code literal-block"><span></span><span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">random</span><span class="p">,</span> <span class="n">uniform</span><span class="p">,</span> <span class="n">randint</span><span class="p">,</span> <span class="n">shuffle</span><span class="p">,</span> <span class="n">choice</span>

<span class="n">random</span><span class="p">()</span> <span class="c1"># erzeugt eine gleichverteilte Pseudozufallszahl zwischen 0 und 1 (ohne die 1).</span>
<span class="n">uniform</span><span class="p">(</span><span class="mf">3.4</span><span class="p">,</span> <span class="mf">7.8</span><span class="p">)</span> <span class="c1"># erzeugt eine gleichverteilte Pseudozufallszahl (float) zwischen den gegebenen Grenzen</span>

<span class="k">def</span> <span class="nf">wuerfel</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span> <span class="c1"># erzeugt zufällig (und gleichverteilt) einen Integer zwischen 1 und 6 (einschließlich 6)</span>

<span class="n">l</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="n">shuffle</span><span class="p">(</span><span class="n">l</span><span class="p">)</span> <span class="c1"># vertauscht die Elemente von l zufällig</span>
<span class="n">choice</span><span class="p">(</span><span class="n">l</span><span class="p">)</span> <span class="c1"># zieht zufällig ein Element aus l</span>
</pre>


<h4><a href="https://docs.python.org/2/library/time.html">time</a></h4>
<p>Dieses Modul beinhaltet diverse Funktionen, die für Zeitmessungen benutzt werden können. </p>
<p>Beispiel:</p>
<pre class="code literal-block"><span></span><span class="kn">import</span> <span class="nn">time</span>

<span class="k">print</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">())</span> <span class="c1"># Gibt die Sekunden an, die seit dem 1. Januar 1970 vergangen sind</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="c1"># Das Programm stoppt für 5 Sekunden</span>
</pre>


<p>Für Datumsberechnungen ist darüberhinaus das Modul <a href="https://docs.python.org/2/library/datetime.html">datetime</a> hilfreich.</p>
<h4><a href="https://docs.python.org/2/library/argparse.html">argparse</a></h4>
<p>Möchte man ein Programm mit mehreren Parametern von der Kommandozeile aufrufen, wird es recht bald komplex, die Eingaben des Users auf Korrektheit zu prüfen und richtig zu parsen.</p>
<p>Hier hilft das Modul argparse.</p>
<p>Beispiel:</p>
<pre class="code literal-block"><span></span><span class="kn">import</span> <span class="nn">argparse</span>

<span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">"argument"</span><span class="p">)</span> <span class="c1"># hier wird festgelegt, dass es genau ein notwendiges Argument gibt</span>
<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
</pre>


<p>Im obigen Beispiel haben wir festgelegt, dass das Programm mit genau einem Parameter aufgerufen werden muss. Nicht mer und nicht weniger ist möglich.</p>
<p>Manchmal ist es aber auch hilfreich, optionale Parameter festzulegen. Das geht so:</p>
<pre class="code literal-block"><span></span><span class="kn">import</span> <span class="nn">argparse</span>

<span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">"--argument"</span><span class="p">)</span> <span class="c1"># hier wird festgelegt, dass es genau ein notwendiges Argument gibt</span>
<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>

<span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">argument</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">argument</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">"Kein Argument angegeben"</span><span class="p">)</span>
</pre>


<p>Dieses Mal können wir das Programm entweder ohne jeglichen Parameter aufrufen, oder wir rufen es folgendermaßen auf (unter der Annahme, dass die Datei main.py heißt):</p>
<pre class="code literal-block"><span></span>python main.py --argument irgendwas
</pre>


<h4><a href="https://docs.python.org/2/library/pdb.html">pdb</a></h4>
<p>pdb ist der Python Debugger. Er ist ein sehr hilfreiches Tool, um Fehler im eigenen Python-Code zu finden.</p>
<p>Typischerweise ruft man den Debugger auf, indem man an der Stelle seines Codes, an der man etwas inspizieren will, folgende Zeile schreibt:</p>
<pre class="code literal-block"><span></span><span class="n">pdb</span><span class="o">.</span><span class="n">set_trace</span><span class="p">()</span>
</pre>


<p>An dieser Stelle hält der Debugger das Programm an und wechselt in den interaktiven Modus, in dem man sich die Werte aller Variablen anschauen kann, aber auch neue Variablen definieren oder Funktionen ausführen kann.</p>
<p>Mit folgenden Befehlen kann man weiter durch den Code navigieren:</p>
<ul>
<li>
<p><em>next</em> führt die nächste Zeile des Programms aus und pausiert dann wieder. Enthält die nächste Zeile einen Funktionsaufruf, wird die komplette Funktion ausgeführt, ohne dass in ihr gestoppt wird</p>
</li>
<li>
<p><em>step</em> ist wie _next, "betritt" aber auch Funktionen wenn sie aufgerufen werden</p>
</li>
<li>
<p>Befindet man sich in einer Funktion, sorgt <em>return</em> dafür, dass das Programm erst wieder angehalten wird, wenn das return statement der Funktion erreicht wird.</p>
</li>
<li>
<p><em>until</em> führt den Code weiter aus</p>
</li>
<li>
<p><em>until</em> führt den Code weiter aus, bis die angegebene Zeilennummer erreicht wird</p>
</li>
<li>
<p><em>jump</em> erlaubt schließlich noch das direkte Springen zu einer beliebigen Zeilennummer</p>
</li>
</ul>
<h3>Weitere Module installieren</h3>
<p>Es gibt noch unzählige weitere Module für Python, die sich leicht nachinstallieren lassen. </p>
<p>Ubuntu- und Debian-User mit Administratorrechten finden viele Pakete in ihrem Paketmanager, z.B. python-numpy, python-scipy, ...</p>
<p>Alternativ ist es möglich eine sogenannte virtualenv zu benutzen. Diese kopiert den Python-Interpreter, der oftmals in einem geschützten Pfad liegt, in das Home-Verzeichnis des Benutzers. Das erleichtert die Modul-Installation deutlich.</p>
<p>Alle mit Linux können folgendes tun:</p>
<pre class="code literal-block"><span></span><span class="nb">cd</span> ~
mkdir virtualenvs
virtualenv virtualenvs/pythonkurs
<span class="nb">source</span> virtualenvs/pythonkurs/bin/activate
</pre>


<p>Nach diesen vier Schritten wird der Python-Interpreter benutzt der im Verzeichnis ~/virtualenvs/pythonkurs/bin/ liegt, benutzt.</p>
<p>Nun kann man Module mittels <em>pip</em> installieren:</p>
<pre class="code literal-block"><span></span>pip install &lt;Modulname&gt;
</pre>


<h2>Exceptions</h2>
<p>Bisher gingen wir immer davon aus, dass unsere Programme fehlerfrei laufen, oder haben Fehlermeldungen erstmal ignoriert.. Hier wird nun gezeigt, wie man seinen Code so schreiben kann, dass er auf Fehler direkt reagiert.</p>
<p>Beispiel:</p>
<pre class="code literal-block"><span></span><span class="n">zahl</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="nb">raw_input</span><span class="p">(</span><span class="s2">"Bitte Zahl eingeben: "</span><span class="p">))</span>
</pre>


<p>Führen wir dieses Zahl aus und geben brav eine Zahl ein, kommt es zu keinen Problemen. Hat der Anwender jedoch nicht aufgepasst und gibt z.B. "Hallo" ein, wird er von folgender Meldung überrascht:</p>
<pre class="code literal-block"><span></span><span class="n">ValueError</span><span class="o">:</span> <span class="n">could</span> <span class="n">not</span> <span class="n">convert</span> <span class="n">string</span> <span class="n">to</span> <span class="n">float</span><span class="o">:</span> <span class="n">Hallo</span>
</pre>


<p>Ganz logisch, float() kann den String "Hallo" nicht in eine Zahl umwandeln, daher erscheint ein sogenannter ValueError.</p>
<p>Nun möchten wir aber gerne ein anderes Verhalten unseres Codes. Wir möchten, dass er den User so lange nach einer Zahl fragt, bis er sie bekommt. Die Lösung könnte so aussehen:</p>
<pre class="code literal-block"><span></span><span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">zahl</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="nb">raw_input</span><span class="p">(</span><span class="s2">"Bitte Zahl eingeben: "</span><span class="p">))</span>
        <span class="k">print</span><span class="p">(</span><span class="mi">5</span> <span class="o">/</span> <span class="n">zahl</span><span class="p">)</span>
        <span class="k">break</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">"Hey, das war gar keine Zahl!"</span><span class="p">)</span>
</pre>


<p>Damit hätten wir schonmal das Problem der falschen Benutzereingabe gelöst. Allerdings gibt es immer noch eine Möglichkeit, das Programm zum Absturz zu bringen: Gibt der User 0 ein, grüßt ihn der <strong>ZeroDivisionError</strong>!</p>
<p>Also fangen wir auch den ab:</p>
<pre class="code literal-block"><span></span><span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">zahl</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="nb">raw_input</span><span class="p">(</span><span class="s2">"Bitte Zahl eingeben: "</span><span class="p">))</span>
        <span class="k">print</span> <span class="mi">5</span> <span class="o">/</span> <span class="n">zahl</span>
        <span class="k">break</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">"Hey, das war gar keine Zahl!"</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ZeroDivisionError</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">"Null ist keine gute Idee..."</span><span class="p">)</span>
</pre>


<p>Damit haben wir uns erstmal gegen alle Gefahren abgesichert. Eine Liste der möglichen Exceptions gibt es <a href="https://docs.python.org/2/library/exceptions.html">hier</a>.</p>
<p>Doch damit nicht genug, wir können auch selbst Exceptions "raisen", d.h. Code auf Probleme mit einer Exception reagieren lassen:</p>
<pre class="code literal-block"><span></span><span class="kn">import</span> <span class="nn">types</span>
<span class="k">def</span> <span class="nf">add_integers</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">!=</span> <span class="n">types</span><span class="o">.</span><span class="n">IntType</span> <span class="ow">or</span> <span class="nb">type</span><span class="p">(</span><span class="n">b</span><span class="p">)</span> <span class="o">!=</span> <span class="n">types</span><span class="o">.</span><span class="n">IntType</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">"So nicht, mein Freund!"</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
</pre>


<p>Diese Funktion beschwert sich beispielsweise lautstark mit einem ValueError, sobald wir ihr ein Argument liefern, das kein Integer ist.
Die Wahl der Exception ist dabei uns überlassen</p>
</div>
    </div>
    <aside class="postpromonav"><nav><ul class="pager hidden-print">
<li class="previous">
                <a href="../funktionen_klassen_objekte/" rel="prev" title="3  Funktionen, Klassen und Objekte">Vorheriger Eintrag</a>
            </li>
            <li class="next">
                <a href="../numpy/" rel="next" title="5 - Numpy">Nächster Eintrag</a>
            </li>
        </ul></nav></aside></article><!--End of body content--><footer id="footer">
            Contents © 2017         <a href="mailto:gabriel.kabbe@chemie.uni-halle.de">Gabriel Kabbe</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><script src="../../assets/js/colorbox-i18n/jquery.colorbox-de.js"></script><script>$('a.image-reference:not(.islink) img:not(.islink)').parent().colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script><!-- fancy dates --><script>
    moment.locale("de");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates -->
</body>
</html>
